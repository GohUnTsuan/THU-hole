{"code": 0, "data": [{"cid": 3144902, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": -1, "tag": null, "text": "https://pastebin.com/rbNxqPDU", "timestamp": 1639223980, "type": "text", "url": ""}, {"cid": 3144910, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": -1, "tag": null, "text": "woc忘打码了", "timestamp": 1639224079, "type": "text", "url": ""}, {"cid": 3144918, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Alice", "pid": 595732, "reply_to": 3144910, "tag": null, "text": "Re 洞主: 有token可以登你的号吗", "timestamp": 1639224244, "type": "text", "url": ""}, {"cid": 3144933, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3144918, "tag": null, "text": "Re Alice: 哦没事了，已经注销了，那个token没用了。吓死我了😂", "timestamp": 1639224447, "type": "text", "url": ""}, {"cid": 3145087, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Bob", "pid": 595732, "reply_to": 3144902, "tag": null, "text": "dz还在吗", "timestamp": 1639226079, "type": "text", "url": ""}, {"cid": 3145106, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": -1, "tag": null, "text": "这个版本可以下载图片，图片保存在img文件夹下。数据先保存一下，后面可以想想办法配上UI。", "timestamp": 1639226242, "type": "text", "url": ""}, {"cid": 3145114, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Carol", "pid": 595732, "reply_to": -1, "tag": null, "text": "爬到一半，远程关闭链接了，艹，我放弃了，把关注列表保存下来，等大佬全爬完了对着找算了", "timestamp": 1639226357, "type": "text", "url": ""}, {"cid": 3145115, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Dave", "pid": 595732, "reply_to": -1, "tag": null, "text": "Can't connect to HTTPS URL because the SSL module is not available.\n报错求助", "timestamp": 1639226360, "type": "text", "url": ""}, {"cid": 3145118, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Dave", "pid": 595732, "reply_to": -1, "tag": null, "text": "(っ °Д °;)っ", "timestamp": 1639226384, "type": "text", "url": ""}, {"cid": 3145124, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145115, "tag": null, "text": "Re Dave: q内用不了哦～", "timestamp": 1639226448, "type": "text", "url": ""}, {"cid": 3145136, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145114, "tag": null, "text": "Re Carol: 爬不完的，一天最多爬8000个洞，这个是规则写死的，一天之内谁也爬不完60w个洞，只能把自己关注的几百个爬完", "timestamp": 1639226584, "type": "text", "url": ""}, {"cid": 3145138, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Dave", "pid": 595732, "reply_to": 3145124, "tag": null, "text": "Re 洞主: 啊？请问是什么意思", "timestamp": 1639226643, "type": "text", "url": ""}, {"cid": 3145146, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145138, "tag": null, "text": "Re Dave: q=墙", "timestamp": 1639226702, "type": "text", "url": ""}, {"cid": 3145166, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145114, "tag": null, "text": "Re Carol: 除非有人带大家爬，每人爬8000个，75个人一天内就能爬完。但我不知道这样爬算不算组织黑客入侵计算机系统，会不会有法律上的问题😂", "timestamp": 1639226908, "type": "text", "url": ""}, {"cid": 3145194, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Eve", "pid": 595732, "reply_to": -1, "tag": null, "text": "洞主能帮忙爬一下部分性相关的洞吗 本来研究想要做一下 有偿可以嘛", "timestamp": 1639227232, "type": "text", "url": ""}, {"cid": 3145208, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Francis", "pid": 595732, "reply_to": -1, "tag": null, "text": "每次爬几十条之后就会报错 OpenSSL.SSL.SysCallError: (10054, 'WSAECONNRESET') 怎么解决呢 在requests.get里面加上参数verify=False也没用", "timestamp": 1639227392, "type": "text", "url": ""}, {"cid": 3145225, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145208, "tag": null, "text": "Re Francis: 不知道。dz没见过这个错误。dz是mac上跑的，不熟悉Windows的函数", "timestamp": 1639227685, "type": "text", "url": ""}, {"cid": 3145231, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145194, "tag": null, "text": "Re Eve: 每个人每天只能爬8000条，dz快到limit了。你可以改get_pids()函数，让它直接返回你想爬的洞号。不过dz不知道怎么找比如带xxg tag的洞，因为树洞的搜索不是按照tag搜的。", "timestamp": 1639227833, "type": "text", "url": ""}, {"cid": 3145242, "deleted": false, "image_metadata": {"h": 184, "w": 1303}, "is_dz": false, "name": "Grace", "pid": 595732, "reply_to": 3144902, "tag": null, "text": "请问这个是怎么回事呢？", "timestamp": 1639228048, "type": "image", "url": "tm/tm3thpukssadmyt5m2ye4ku7qp4bmiuj.jpeg"}, {"cid": 3145252, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145242, "tag": null, "text": "Re Grace: 运行这条命令了吗？`python3 -m pip install tqdm requests`", "timestamp": 1639228243, "type": "text", "url": ""}, {"cid": 3145263, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Hans", "pid": 595732, "reply_to": -1, "tag": null, "text": "如果不开VPN\nFailed to establish a new connection: [WinError 10060] 由于连接方在一段时间后没有正确答复或连接的主机没有反应，连接尝试失败。'))\n如果开了VPN\nValueError: check_hostname requires server_hostname\n请问dz怎么办", "timestamp": 1639228388, "type": "text", "url": ""}, {"cid": 3145269, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145263, "tag": null, "text": "Re Hans: dz不熟悉Windows。。你试一下`pip install urllib3==1.25.11`？参考https://stackoverflow.com/questions/66642705/why-requests-raise-this-exception-check-hostname-requires-server-hostname", "timestamp": 1639228532, "type": "text", "url": ""}, {"cid": 3145271, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Francis", "pid": 595732, "reply_to": 3145263, "tag": null, "text": "Re Hans: cz用pip install requests==2.20 成功了\n", "timestamp": 1639228573, "type": "text", "url": ""}, {"cid": 3145272, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Isabella", "pid": 595732, "reply_to": -1, "tag": null, "text": "如果在墙内开VPN也不能爬是吗？", "timestamp": 1639228604, "type": "text", "url": ""}, {"cid": 3145273, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Francis", "pid": 595732, "reply_to": 3145208, "tag": null, "text": "但还是解决不了 OpenSSL.SSL.SysCallError: (10054, 'WSAECONNRESET') 的错 sigh", "timestamp": 1639228622, "type": "text", "url": ""}, {"cid": 3145282, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145272, "tag": null, "text": "Re Isabella: 能爬，但你可能得配proxy，比如`export http_proxy=socks5://127.0.0.1:1080; export https_proxy=socks5://127.0.0.1:1080`。不同梯子不一样，得自己配一下", "timestamp": 1639228814, "type": "text", "url": ""}, {"cid": 3145299, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Isabella", "pid": 595732, "reply_to": 3145282, "tag": null, "text": "Re 洞主: 好的，试试，感谢！", "timestamp": 1639229104, "type": "text", "url": ""}, {"cid": 3145307, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Hans", "pid": 595732, "reply_to": 3145269, "tag": null, "text": "Re 洞主: 谢谢dz，可以用了，不过还是容易中途掉线", "timestamp": 1639229259, "type": "text", "url": ""}, {"cid": 3145310, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Hans", "pid": 595732, "reply_to": 3145299, "tag": null, "text": "Re Isabella: pip install urllib3==1.25.11 之后开VPN可以爬", "timestamp": 1639229289, "type": "text", "url": ""}, {"cid": 3145321, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Jason", "pid": 595732, "reply_to": 3145282, "tag": null, "text": "Re 洞主:请问lock exists,please kill other processes and remove .crawler.lock 怎么解决呀，已经挂梯子了\n", "timestamp": 1639229574, "type": "text", "url": ""}, {"cid": 3145323, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Isabella", "pid": 595732, "reply_to": 3145310, "tag": null, "text": "Re Hans: 真得可以了，感谢！学习之路任重而道远", "timestamp": 1639229623, "type": "text", "url": ""}, {"cid": 3145325, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Isabella", "pid": 595732, "reply_to": 3145321, "tag": null, "text": "Re Jason: 删掉同目录下的.crawler.lock，再不行把进程删了（一般raise error后也就退出了）", "timestamp": 1639229674, "type": "text", "url": ""}, {"cid": 3145329, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Jason", "pid": 595732, "reply_to": 3145325, "tag": null, "text": "Re Isabella: 同目录下没有.crawler.lock", "timestamp": 1639229737, "type": "text", "url": ""}, {"cid": 3145330, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Hans", "pid": 595732, "reply_to": 3145282, "tag": null, "text": "Re 洞主: 但是还没有成功爬过1/10……", "timestamp": 1639229742, "type": "text", "url": ""}, {"cid": 3145343, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145321, "tag": null, "text": "Re Jason: 文件夹里有一个文件叫.crawler.lock，把它删除就好了。这个是用来防止你同时开多个爬虫覆盖掉已经保存的文件的。", "timestamp": 1639229961, "type": "text", "url": ""}, {"cid": 3145412, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Grace", "pid": 595732, "reply_to": -1, "tag": null, "text": "请问dz为什么会出现越爬越慢的情况哇😂", "timestamp": 1639231602, "type": "text", "url": ""}, {"cid": 3145475, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Jason", "pid": 595732, "reply_to": 3145343, "tag": null, "text": "Re 洞主:感谢！但是之后又出现了“远程主机强迫关闭了一个现有的连接”这样的提示，请问怎么解决呀？谢谢\n", "timestamp": 1639233098, "type": "text", "url": ""}, {"cid": 3145476, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Kate", "pid": 595732, "reply_to": 3145330, "tag": null, "text": "同样没有爬过10%", "timestamp": 1639233105, "type": "text", "url": ""}, {"cid": 3145503, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Louis", "pid": 595732, "reply_to": -1, "tag": null, "text": "计算机小白求问，是复制代码之后点运行吗？token要在哪里输入呀，谢谢dz", "timestamp": 1639233507, "type": "text", "url": ""}, {"cid": 3145531, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145412, "tag": null, "text": "Re Grace: 获取关注列表执行结束了吗？哦，越怕越慢可能是json.dump的地方每次我都是把之前爬取过的内容也重新写入了，图省事来着。。但应该影响不大呀。你关注列表有多长？", "timestamp": 1639234014, "type": "text", "url": ""}, {"cid": 3145537, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145475, "tag": null, "text": "Re Jason: 脚本没成功链接VPN？", "timestamp": 1639234068, "type": "text", "url": ""}, {"cid": 3145549, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3144902, "tag": null, "text": "Re Kate: Re Grace: 可以试试把第143行`if len(self.contents) % 10 == 0:`改成`if len(self.contents) % 100 == 0:`，保存就不会那么频繁。实在嫌慢可以把sleep(5)调小点，但可能会给树洞服务器增加负担。。", "timestamp": 1639234231, "type": "text", "url": ""}, {"cid": 3145553, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145503, "tag": null, "text": "Re Louis: 在命令行里输入，`python3 crawler.py 4tgvmhi5g0mw2ncofdziukdeyq2ymbjz`这样", "timestamp": 1639234286, "type": "text", "url": ""}, {"cid": 3145556, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145476, "tag": null, "text": "Re Kate: 慢还有一个原因是你想爬的洞里图片太多了，下载图片太慢也有可能。不想下载图片的话可以把69行到71行process_image的三行注释掉", "timestamp": 1639234394, "type": "text", "url": ""}, {"cid": 3145599, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Grace", "pid": 595732, "reply_to": 3145531, "tag": null, "text": "Re 洞主: 爬完了，貌似是我的图片太多了hhh，感谢dz！让我留下这些回忆", "timestamp": 1639235131, "type": "text", "url": ""}, {"cid": 3145606, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Grace", "pid": 595732, "reply_to": 3145531, "tag": null, "text": "Re 洞主: 我还想问下dz那个json文件怎么能打开后看得整洁一点呢？就是没有那些代码什么的，我今天现学的python还不太懂😭", "timestamp": 1639235236, "type": "text", "url": ""}, {"cid": 3145632, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145606, "tag": null, "text": "Re Grace: 恭喜Grace爬完🎉。着急的话可以看#595705的洞主做的html版简易UI，应该是一个html的列表。有数据了可以看一下他们GitHub代码，这些都是服务器API传回来的东西，理论上可以直接塞回网页版UI去，看起来就和原版树洞一摸一样了。", "timestamp": 1639235839, "type": "text", "url": ""}, {"cid": 3145740, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Jason", "pid": 595732, "reply_to": 3145632, "tag": null, "text": "Re 洞主: 请问洞主，爬了一定比例之后突然终止也无任何警示是怎么回事呀？感谢\n", "timestamp": 1639237546, "type": "text", "url": ""}, {"cid": 3145853, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Grace", "pid": 595732, "reply_to": 3145632, "tag": null, "text": "Re 洞主: 好的，我再学习一下，谢谢dz", "timestamp": 1639239002, "type": "text", "url": ""}, {"cid": 3145957, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3145740, "tag": null, "text": "Re Jason: 应该是爬完了吧？你的关注列表有多长？", "timestamp": 1639240166, "type": "text", "url": ""}, {"cid": 3146042, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Margaret", "pid": 595732, "reply_to": -1, "tag": null, "text": "求助dz，为什么我的每次都是爬完8条就停下来了呢", "timestamp": 1639241378, "type": "text", "url": ""}, {"cid": 3146454, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Kate", "pid": 595732, "reply_to": 3145549, "tag": null, "text": "Re 洞主: 感谢dz~~按dz的修两处改后可以顺利爬完了。不过还是只爬到img，json文件中却没有文字内容。获取关注列表执行一直停在150/2000，8％，下方进度条一直无进度。能请dz解答下吗", "timestamp": 1639246163, "type": "text", "url": ""}, {"cid": 3146495, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3146042, "tag": null, "text": "Re Margaret: 可能是你的第九个洞有很多图片，而且你的网速下载图片很慢？", "timestamp": 1639247216, "type": "text", "url": ""}, {"cid": 3146505, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3146454, "tag": null, "text": "Re Kate: 默认是10条保存一次，既然你有下载到图片，就说明关注列表读取完毕了。JSON一直没保存的话，应该是没到10条吧（或者你改完变成100条保存一次那就没到100条）。可能是梯子不稳？有timeout之类的报错吗？可以先把sleep调低试一下，看能不能JSON文件有结果", "timestamp": 1639247526, "type": "text", "url": ""}, {"cid": 3147013, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Margaret", "pid": 595732, "reply_to": 3146042, "tag": null, "text": "Re Margaret: 把第九个洞换成没图的，去掉代码里爬图的部分也还是停在那儿😨😭😭", "timestamp": 1639282347, "type": "text", "url": ""}, {"cid": 3147026, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Nathan", "pid": 595732, "reply_to": 3147013, "tag": null, "text": "Re Margaret: 把main里面的try except拿掉看看报错在哪", "timestamp": 1639282746, "type": "text", "url": ""}, {"cid": 3147097, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Olivia", "pid": 595732, "reply_to": -1, "tag": null, "text": "Re 洞主: 如果我想爬热榜该怎么操作呀）", "timestamp": 1639284168, "type": "text", "url": ""}, {"cid": 3147115, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Margaret", "pid": 595732, "reply_to": 3147026, "tag": null, "text": "Re Nathan: 谢谢Nathan！\n报错是这个：\nUnicodeEncodeError: 'gbk' codec can't encode character '\\U0001f62d' in position 1: illegal multibyte sequence\n感觉是windows字符编码的问题", "timestamp": 1639284671, "type": "text", "url": ""}, {"cid": 3147150, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Margaret", "pid": 595732, "reply_to": 3147115, "tag": null, "text": "Re Margaret: 改了utf-8之后好了，但是有时候提示dump，怎么回事呢", "timestamp": 1639285568, "type": "text", "url": ""}, {"cid": 3147175, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Margaret", "pid": 595732, "reply_to": 3147150, "tag": null, "text": "Re Margaret: 稳定地每十条一次dump", "timestamp": 1639286914, "type": "text", "url": ""}, {"cid": 3147177, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Margaret", "pid": 595732, "reply_to": 3147175, "tag": null, "text": "Re Margaret: 噢原来是保存吗，懂了", "timestamp": 1639286935, "type": "text", "url": ""}, {"cid": 3147830, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Louis", "pid": 595732, "reply_to": 3145282, "tag": null, "text": "Re 洞主: 请问配这个在哪部分配呀orz 遇到了和Hans一样的问题但是尝试了洞里的其他几种方法都没解决", "timestamp": 1639306467, "type": "text", "url": ""}, {"cid": 3147873, "deleted": false, "image_metadata": {}, "is_dz": true, "name": "洞主", "pid": 595732, "reply_to": 3147830, "tag": null, "text": "Re Louis: 配VPN吗？不同VPN配置不一样，得你自己想办法", "timestamp": 1639307969, "type": "text", "url": ""}, {"cid": 3148530, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Paul", "pid": 595732, "reply_to": -1, "tag": null, "text": "请问把什么换成token啊", "timestamp": 1639325905, "type": "text", "url": ""}, {"cid": 3148575, "deleted": false, "image_metadata": {"h": 887, "w": 1920}, "is_dz": false, "name": "Paul", "pid": 595732, "reply_to": -1, "tag": null, "text": "这个报错啥意思呀", "timestamp": 1639327035, "type": "image", "url": "6z/6zxj3wo7gi4kozl7xcnet2mtxd4er2dd.jpeg"}, {"cid": 3148580, "deleted": false, "image_metadata": {}, "is_dz": false, "name": "Carol", "pid": 595732, "reply_to": 3148530, "tag": null, "text": "Re Paul: 自己写一个吧2333，把这个洞和另一个洞放到一起看一遍代码也就知道咋回事了", "timestamp": 1639327219, "type": "text", "url": ""}], "post": {"deleted": false, "image_metadata": {"h": 353, "w": 573}, "likenum": 155, "pid": 595732, "reply": 66, "tag": null, "text": "#595301\n写了个爬虫，可以保存你关注过的树洞。需要获得手动在浏览器内获得token，Python版本>=3.6。", "timestamp": 1639223966, "type": "image", "updated_at": 1639327216, "url": "f4/f4ffgn5laahppsxus7t3ckcicyctarjx.jpeg", "vote": {}}}